(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2953:(t,r,a)=>{Promise.resolve().then(a.t.bind(a,2511,23)),Promise.resolve().then(a.t.bind(a,517,23)),Promise.resolve().then(a.t.bind(a,7929,23)),Promise.resolve().then(a.bind(a,9726))},9726:(t,r,a)=>{"use strict";a.d(r,{A:()=>u,AuthProvider:()=>l});var e=a(2860),o=a(3200),n=a(6937),c=a(3345),s=a(3875);let i=(0,o.createContext)(void 0),l=t=>{let{children:r}=t,[a,l]=(0,o.useState)(!1),[u,h]=(0,o.useState)(null),[d,y]=(0,o.useState)(!0),[g,f]=(0,o.useState)(null),w=(0,n.useRouter)();(0,o.useEffect)(()=>{let t=localStorage.getItem("authToken");t?((0,c.O5)(t),m()):y(!1)},[]);let m=async()=>{y(!0);try{let t=await (0,c.VM)();h(t.user||t),l(!0),f(null)}catch(t){console.error("Failed to fetch user profile:",t),localStorage.removeItem("authToken"),(0,c.O5)(null),l(!1),h(null)}finally{y(!1)}},p=async t=>{y(!0),f(null);try{let r=await (0,c.Lx)(t);if(r.access_token)localStorage.setItem("authToken",r.access_token),await m(),w.push("/");else throw Error("Login failed: No token received.")}catch(e){var r,a;console.error("Login error:",e);let t="Login failed. Please check your credentials.";throw s.A.isAxiosError(e)&&(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)?t=e.response.data.message:e instanceof Error&&"Login failed: No token received."!==e.message&&(t=e.message),f(t),l(!1),h(null),localStorage.removeItem("authToken"),(0,c.O5)(null),y(!1),e}},v=async()=>{y(!0);try{await (0,c.y4)()}catch(t){console.error("Logout API call failed (if any):",t)}finally{localStorage.removeItem("authToken"),l(!1),h(null),f(null),y(!1),w.push("/login")}};return(0,e.jsx)(i.Provider,{value:{isAuthenticated:a,user:u,login:p,logout:v,isLoading:d,error:g,clearError:()=>{f(null)}},children:r})},u=()=>{let t=(0,o.useContext)(i);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},3345:(t,r,a)=>{"use strict";a.d(r,{Aq:()=>v,I3:()=>w,IR:()=>f,I_:()=>s,Jf:()=>l,Kk:()=>p,Lx:()=>A,O5:()=>c,TK:()=>I,VM:()=>P,YJ:()=>g,fm:()=>_,gu:()=>y,iS:()=>E,jD:()=>u,lo:()=>k,mc:()=>h,nT:()=>i,pV:()=>d,rx:()=>m,sH:()=>b,y4:()=>S});var e=a(3875);let o=a(4916).env.NEXT_PUBLIC_API_URL||"/api/v1",n=e.A.create({baseURL:o,headers:{"Content-Type":"application/json"}}),c=t=>{t?n.defaults.headers.common.Authorization="Bearer ".concat(t):delete n.defaults.headers.common.Authorization},s=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await n.get("/trials",{params:t})).data}catch(t){throw console.error("Error fetching trials:",t),t}},i=async t=>{try{return(await n.get("/trials/".concat(t))).data}catch(r){throw console.error("Error fetching trial ".concat(t,":"),r),r}},l=async t=>{try{return(await n.post("/trials",t)).data}catch(t){throw console.error("Error creating trial:",t),t}},u=async t=>{try{return(await n.get("/trials/".concat(t,"/protocols"))).data}catch(r){throw console.error("Error fetching protocols for trial ".concat(t,":"),r),r}},h=async(t,r)=>{try{return(await n.post("/trials/".concat(t,"/protocols/draft"),r)).data}catch(r){throw console.error("Error drafting protocol for trial ".concat(t,":"),r),r}},d=async t=>{try{return(await n.get("/protocols/generation-status/".concat(t))).data}catch(r){throw console.error("Error fetching protocol generation status for task ".concat(t,":"),r),r}},y=async t=>{try{return(await n.get("/trials/".concat(t,"/irb-submissions"))).data}catch(r){throw console.error("Error fetching IRB submissions for trial ".concat(t,":"),r),r}},g=async(t,r)=>{try{return(await n.post("/trials/".concat(t,"/irb-submissions"),r)).data}catch(r){throw console.error("Error creating IRB submission for trial ".concat(t,":"),r),r}},f=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await n.get("/sites",{params:t})).data}catch(t){throw console.error("Error fetching global sites:",t),t}},w=async t=>{try{return(await n.get("/trials/".concat(t,"/sites"))).data}catch(r){throw console.error("Error fetching sites for trial ".concat(t,":"),r),r}},m=async(t,r)=>{try{return(await n.post("/trials/".concat(t,"/sites"),r)).data}catch(r){throw console.error("Error associating site to trial ".concat(t,":"),r),r}},p=async t=>{try{return(await n.get("/trials/".concat(t,"/patients"))).data}catch(r){throw console.error("Error fetching patients for trial ".concat(t,":"),r),r}},v=async(t,r)=>{try{return(await n.post("/trials/".concat(t,"/patients/identify"),r)).data}catch(r){throw console.error("Error identifying patients for trial ".concat(t,":"),r),r}},E=async t=>{try{return(await n.get("/patients/identification-status/".concat(t))).data}catch(r){throw console.error("Error fetching patient identification status for task ".concat(t,":"),r),r}},_=async t=>{try{return(await n.get("/trials/".concat(t,"/monitoring/summary"))).data}catch(r){throw console.error("Error fetching monitoring summary for trial ".concat(t,":"),r),r}},b=async t=>{try{return(await n.get("/trials/".concat(t,"/monitoring/events"))).data}catch(r){throw console.error("Error fetching monitoring events for trial ".concat(t,":"),r),r}},k=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await n.get("/admin/users",{params:t})).data}catch(t){throw console.error("Error fetching users:",t),t}},I=async(t,r)=>{try{return(await n.put("/admin/users/".concat(t),r)).data}catch(r){throw console.error("Error updating user ".concat(t,":"),r),r}},A=async t=>{try{let r=await n.post("/auth/login",t);return r.data.access_token&&c(r.data.access_token),r.data}catch(t){throw console.error("Error logging in:",t),c(null),t}},S=async()=>{c(null)},P=async()=>{try{return(await n.get("/users/me/profile")).data}catch(t){throw console.error("Error fetching user profile:",t),t}}},7929:()=>{},2511:t=>{t.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},517:t=>{t.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},t=>{var r=r=>t(t.s=r);t.O(0,[976,787,685,411,358],()=>r(2953)),_N_E=t.O()}]);